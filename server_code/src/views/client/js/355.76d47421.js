"use strict";(self["webpackChunkvue3_nf0"]=self["webpackChunkvue3_nf0"]||[]).push([[355],{7355:function(e,t,a){a.r(t),a.d(t,{default:function(){return oe}});a(7658);var l=a(6252),i=a(3577),s=(a(6154),a(2262)),o=a(9737),n=a(2201);const u=e=>((0,l.dD)("data-v-4d778f52"),e=e(),(0,l.Cn)(),e),d={class:"app-contain",style:{padding:"20px 20px",margin:"0px auto 40px",alignItems:"flex-start",flexWrap:"wrap",background:"none",display:"flex",width:"1200px",position:"relative",justifyContent:"space-between"}},r={class:"back_view"},c={class:"bread_view"},p={class:"detail_view"},v={class:"swiper_view"},m=["src"],_={class:"info_view"},g={class:"title_view"},f={class:"detail_title"},h=u((()=>(0,l._)("i",{class:"iconfont icon-likeline1"},null,-1))),w=u((()=>(0,l._)("span",null,"收藏",-1))),k=[h,w],y=u((()=>(0,l._)("i",{class:"iconfont iconfontActive icon-likefill1"},null,-1))),b=u((()=>(0,l._)("span",{class:"textActive"},"取消收藏",-1))),x=[y,b],$={class:"info_item"},C=u((()=>(0,l._)("div",{class:"info_label"},"小说分类",-1))),U={class:"info_text"},H={class:"info_item"},z=u((()=>(0,l._)("div",{class:"info_label"},"作家账号",-1))),W={class:"info_text"},A={class:"info_item"},j=u((()=>(0,l._)("div",{class:"info_label"},"作家姓名",-1))),q={class:"info_text"},D={class:"info_item"},T=u((()=>(0,l._)("div",{class:"info_label"},"收藏数量",-1))),G={class:"info_text"},S={class:"info_item"},V=u((()=>(0,l._)("div",{class:"info_label"},"点击次数",-1))),F={class:"info_text"},B={class:"btn_view"},M={class:"chapter_box"},N={class:"chapter_title"},P={class:"chapter_list"},K=["onClick"],Y=["innerHTML"],I={class:"my_comment_view"},L={class:"comment_btn"},R={class:"comment_list"},E={class:"comment_top"},O={class:"comment_user"},Z={class:"comment_user_img"},J=["src"],Q={class:"comment_user_info"},X={class:"comment_time"},ee={class:"comment_bottom"},te={class:"comment_content"},ae={key:0,class:"comment_reply"};var le={__name:"formModel",setup(e){const t=(0,l.FN)()?.appContext.config.globalProperties,a=(0,n.yj)(),u=(0,n.tv)(),h="xiaoshuoxinxi",w="小说信息",y=(0,s.iH)([{name:w}]),b=(e,a)=>re.value?t?.$toolUtil.isBackAuth(e,a):t?.$toolUtil.isAuth(e,a),le=(e,a)=>re.value?t?.$toolUtil.isBackAuth(e,a):t?.$toolUtil.isFrontAuth(e,a),ie=()=>{history.back()},se=(0,s.iH)([]),oe=(0,s.iH)(""),ne=(0,s.iH)({}),ue=((0,l.Fl)((()=>t?.$toolUtil.storageGet("vip"))),(0,s.iH)("chapterActive")),de=()=>{t?.$http({url:`${h}/detail/${a.query.id}`,method:"get"}).then((e=>{oe.value=e.data.data.xiaoshuomingcheng,se.value=e.data.data.fengmian?e.data.data.fengmian.split(","):[],ne.value=e.data.data}))},re=(0,s.iH)(!1),ce=()=>{a.query.centerType&&(re.value=!0),de(),me(),we(),De()},pe=(0,s.iH)(!1),ve=(0,s.iH)({}),me=()=>{t?.$toolUtil.storageGet("frontToken")&&t?.$http({url:"storeup/list",method:"get",params:{page:1,limit:1,type:1,refid:a.query.id,tablename:h,userid:t?.$toolUtil.storageGet("userid")}}).then((e=>{e.data.data.list.length?(pe.value=!0,ve.value=e.data.data.list[0]):(pe.value=!1,ve.value={})}))},_e=e=>{if(1!=e||pe.value){if(-1==e&&pe.value){let e=[];e.push(ve.value.id),t?.$http({url:"storeup/delete",method:"post",data:e}).then((e=>{ne.value.storeupnum-=1,t?.$http({url:`${h}/update`,method:"post",data:ne.value}),ve.value={},pe.value=!1,t?.$toolUtil.message("取消成功","success")}))}}else{let a={name:oe.value,picture:se.value[0],inteltype:ne.value.xiaoshuofenlei,refid:ne.value.id,type:e,tablename:h,userid:t?.$toolUtil.storageGet("userid")};t?.$http({url:"storeup/add",method:"post",data:a}).then((e=>{ne.value.storeupnum+=1,t?.$http({url:`${h}/update`,method:"post",data:ne.value}),pe.value=!0,me(),t?.$toolUtil.message("收藏成功","success")}))}},ge=(0,s.iH)(""),fe=(0,s.iH)([]),he=()=>{u.push(`/${h}Chapter?id=${fe.value[0].id}`)},we=()=>{t?.$http({url:`chapter${h}/list`,method:"get",params:{refid:a.query.id,vipread:"否",limit:1e3}}).then((e=>{fe.value=e.data.data.list,ge.value=ye(e.data.data.total)}))},ke=(e,t)=>{u.push(`/${h}Chapter?id=${t}`)},ye=e=>{e=Number(e);var t=["零","一","二","三","四","五","六","七","八","九","十","百","千","万","亿"],a=String(e).length;return 1==a?t[e]:2==a?10==e?t[e]:e>10&&e<20?"十"+t[String(e).charAt(1)]:t[String(e).charAt(0)]+"十"+t[String(e).charAt(1)].replace("零",""):void 0},be=(0,s.iH)({content:"",refid:a.query.id,userid:t?.$toolUtil.storageGet("userid"),nickname:t?.$toolUtil.storageGet("frontName"),avatarurl:t?.$toolUtil.storageGet("headportrait")?t?.$toolUtil.storageGet("headportrait"):""}),xe=(0,s.iH)({content:[{required:!0,message:"请输入",trigger:"blur"}]}),$e=(0,s.iH)({page:1,limit:10,refid:a.query.id}),Ce=(0,s.iH)(["total","prev","pager","next","sizes"]),Ue=(0,s.iH)([]),He=(0,s.iH)(0),ze=(0,s.iH)(null),We=e=>{$e.value.limit=e,De()},Ae=e=>{$e.value.page=e,De()},je=()=>{$e.value.page=$e.value.page-1,De()},qe=()=>{$e.value.page=$e.value.page+1,De()},De=()=>{t?.$http({url:`discuss${h}/list`,params:$e.value,method:"get"}).then((e=>{Ue.value=e.data.data.list,He.value=e.data.data.total}))},Te=()=>{let e="",a=[];e&&(a=e.split(","));for(var l=0;l<a.length;l++){var i=new RegExp(a[l],"g");be.value.content.indexOf(a[l])>-1&&(be.value.content=be.value.content.replace(i,"**"))}ze.value.validate((e=>{e&&t?.$http({url:`discuss${h}/add`,method:"post",data:be.value}).then((e=>{t?.$toolUtil.message("评论成功","success",(()=>{Ge(),De()}))}))}))},Ge=()=>{ze.value.resetFields()},Se=()=>{u.push(`/index/${h}Add?id=${ne.value.id}&&type=edit`)},Ve=()=>{o.T.confirm(`是否删除此${w}？`,"提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then((()=>{t?.$http({url:`${h}/delete`,method:"post",data:[ne.value.id]}).then((e=>{t?.$toolUtil.message("删除成功","success",(()=>{history.back()}))}))}))};return(0,l.bv)((()=>{ce()})),(e,t)=>{const a=(0,l.up)("el-button"),s=(0,l.up)("el-breadcrumb-item"),o=(0,l.up)("el-breadcrumb"),n=(0,l.up)("mySwiper"),u=(0,l.up)("el-tab-pane"),h=(0,l.up)("el-input"),w=(0,l.up)("el-form-item"),oe=(0,l.up)("el-form"),de=(0,l.up)("el-pagination"),ce=(0,l.up)("el-tabs");return(0,l.wg)(),(0,l.iD)("div",d,[(0,l._)("div",r,[(0,l.Wm)(a,{class:"back_btn",onClick:ie,type:"primary"},{default:(0,l.w5)((()=>[(0,l.Uk)("返回")])),_:1})]),(0,l._)("div",c,[(0,l.Wm)(o,{separator:">",class:"breadcrumb"},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{class:"first_breadcrumb",to:{path:"/"}},{default:(0,l.w5)((()=>[(0,l.Uk)("首页")])),_:1}),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(y.value,((e,t)=>((0,l.wg)(),(0,l.j4)(s,{class:"second_breadcrumb",key:t},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.name),1)])),_:2},1024)))),128))])),_:1})]),(0,l._)("div",p,[(0,l._)("div",v,[(0,l.Wm)(n,{data:se.value,type:3,loop:!1,navigation:!1,pagination:!0,paginationType:1,scrollbar:!1,slidesPerView:1,spaceBetween:20,autoHeight:!1,centeredSlides:!1,freeMode:!1,effectType:1,direction:e.horizontal,autoplay:!0,slidesPerColumn:1},{default:(0,l.w5)((t=>[(0,l._)("img",{style:{objectFit:"contain",width:"100%",height:"480px"},src:t.row?e.$config.url+t.row:""},null,8,m)])),_:1},8,["data","direction"])]),(0,l._)("div",_,[(0,l._)("div",g,[(0,l._)("div",f,(0,i.zw)(ne.value.xiaoshuomingcheng),1),pe.value?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",{key:0,class:"follow",onClick:t[0]||(t[0]=e=>_e(1))},k)),pe.value?((0,l.wg)(),(0,l.iD)("div",{key:1,class:"follow",onClick:t[1]||(t[1]=e=>_e(-1))},x)):(0,l.kq)("",!0)]),(0,l._)("div",$,[C,(0,l._)("div",U,(0,i.zw)(ne.value.xiaoshuofenlei),1)]),(0,l._)("div",H,[z,(0,l._)("div",W,(0,i.zw)(ne.value.zuojiazhanghao),1)]),(0,l._)("div",A,[j,(0,l._)("div",q,(0,i.zw)(ne.value.zuojiaxingming),1)]),(0,l._)("div",D,[T,(0,l._)("div",G,(0,i.zw)(ne.value.storeupnum),1)]),(0,l._)("div",S,[V,(0,l._)("div",F,(0,i.zw)(ne.value.clicknum),1)]),(0,l._)("div",B,[(0,l.Wm)(a,{class:"read_btn",type:"warning",onClick:he},{default:(0,l.w5)((()=>[(0,l.Uk)("免费阅读")])),_:1}),!re.value||"未支付"!=ne.value.ispay&&ne.value.ispay||!le("xiaoshuoxinxi","支付")?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(a,{key:0,class:"approval_btn",onClick:e.payClick},{default:(0,l.w5)((()=>[(0,l.Uk)("支付")])),_:1},8,["onClick"])),re.value&&b("xiaoshuoxinxi","修改")?((0,l.wg)(),(0,l.j4)(a,{key:1,class:"edit_btn",type:"primary",onClick:Se},{default:(0,l.w5)((()=>[(0,l.Uk)("修改")])),_:1})):(0,l.kq)("",!0),re.value&&b("xiaoshuoxinxi","删除")?((0,l.wg)(),(0,l.j4)(a,{key:2,class:"del_btn",type:"danger",onClick:Ve},{default:(0,l.w5)((()=>[(0,l.Uk)("删除")])),_:1})):(0,l.kq)("",!0)])])]),(0,l.Wm)(ce,{type:"border-card",modelValue:ue.value,"onUpdate:modelValue":t[3]||(t[3]=e=>ue.value=e),class:"tabs_view"},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{label:"目录",name:"chapterActive"},{default:(0,l.w5)((()=>[(0,l._)("div",M,[(0,l._)("div",N,"正文卷·共"+(0,i.zw)(ge.value)+"章(免费)",1),(0,l._)("div",P,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(fe.value,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{key:t,class:"chapter_item",onClick:t=>ke(e.vipread,e.id)},[(0,l._)("span",null,(0,i.zw)(e.chaptertitle),1)],8,K)))),128))])])])),_:1}),(0,l.Wm)(u,{label:"小说简介",name:"first"},{default:(0,l.w5)((()=>[(0,l._)("div",{innerHTML:ne.value.xiaoshuojianjie},null,8,Y)])),_:1}),(0,l.Wm)(u,{label:"评论",name:"commentActive"},{default:(0,l.w5)((()=>[(0,l._)("div",I,[(0,l.Wm)(oe,{ref_key:"commentFormRef",ref:ze,model:be.value,class:"my_comment_form",rules:xe.value},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{prop:"content"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{class:"comment_inp",modelValue:be.value.content,"onUpdate:modelValue":t[2]||(t[2]=e=>be.value.content=e),type:"textarea",placeholder:"请输入评论内容"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"]),(0,l._)("div",L,[(0,l.Wm)(a,{class:"add_btn",type:"primary",onClick:Te},{default:(0,l.w5)((()=>[(0,l.Uk)("立即评论")])),_:1}),(0,l.Wm)(a,{class:"reset_btn",onClick:Ge},{default:(0,l.w5)((()=>[(0,l.Uk)("重置")])),_:1})])]),(0,l._)("div",R,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(Ue.value,((t,a)=>((0,l.wg)(),(0,l.iD)("div",{class:"comment",key:a},[(0,l._)("div",E,[(0,l._)("div",O,[(0,l._)("div",Z,[(0,l._)("img",{src:t.avatarurl?e.$config.url+t.avatarurl:"../../../assets/avatar.png",alt:""},null,8,J)]),(0,l._)("div",Q,(0,i.zw)(t.nickname),1)]),(0,l._)("div",X,(0,i.zw)(t.addtime),1)]),(0,l._)("div",ee,[(0,l._)("div",te,(0,i.zw)(t.content),1),t.reply?((0,l.wg)(),(0,l.iD)("div",ae," 回复："+(0,i.zw)(t.reply),1)):(0,l.kq)("",!0)])])))),128))]),(0,l.Wm)(de,{background:"",layout:Ce.value.join(","),total:He.value,"page-size":$e.value.limit,"prev-text":"上一页","next-text":"下一页","hide-on-single-page":!1,style:{border:"0px solid #eee",padding:"4px 0",margin:"10px 0 20px",whiteSpace:"nowrap",color:"#333",textAlign:"center",flexWrap:"wrap",background:"none",display:"flex",width:"100%",fontWeight:"500",justifyContent:"center"},onSizeChange:We,onCurrentChange:Ae,onPrevClick:je,onNextClick:qe},null,8,["layout","total","page-size"])])),_:1})])),_:1},8,["modelValue"])])}}},ie=a(3744);const se=(0,ie.Z)(le,[["__scopeId","data-v-4d778f52"]]);var oe=se}}]);
//# sourceMappingURL=355.76d47421.js.map